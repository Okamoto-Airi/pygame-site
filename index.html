<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pygameサイト</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/style.css">
</head>

<body class="font-sans antialiased text-gray-800">

    <header id="main-header">
        <nav class="container mx-auto flex justify-between items-center">
            <img src="images/pygame.png" alt="Pygame Logo" class="h-10" />
            <div class="header-nav-links">
                <a href="#section1">ステージ1</a>
                <a href="#section2">ステージ2</a>
                <a href="#section3">ステージ3</a>
            </div>
        </nav>
    </header>

    <main>
        <section id="section1" class="dynamic-height-section">
            <img src="images/Blue-sky-and-grassland1.jpg" alt="Section 1 Background" class="section-background-image">
            <div class="content-wrapper">
                <div class="main-content-container">
                    <div class="text-content">
                        <h2>ステージ1</h2>
                        <p>矢印キーでキャラクターを移動し、スペースキーで攻撃<br>敵の攻撃に3回当たるとゲームオーバー。敵を倒してゲームクリア！</p>
                    </div>
                    <div class="video-player-container">
                        <video autoplay loop muted playsinline>
                            <source src="video/Level1.mp4" type="video/mp4">
                            あなたのブラウザは動画タグをサポートしていません。
                        </video>
                        <a href="https://okamoto-airi.github.io/web-pygame_level1_PC/" target="_blank"
                            class="play-button">
                            ステージ1をプレイ！（PC版）
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="section2" class="dynamic-height-section">
            <img src="images/Thunderclouds-and-lightning-on-the-grassland3.jpg" alt="Section 2 Background"
                class="section-background-image">
            <div class="content-wrapper">
                <div class="main-content-container">
                    <div class="text-content">
                        <h2>ステージ2</h2>
                        <p>矢印キーでキャラクターを移動し、スペースキーで攻撃<br>敵の攻撃に3回当たるとゲームオーバー。敵を倒してゲームクリア！</p>
                    </div>
                    <div class="video-player-container">
                        <video autoplay loop muted playsinline>
                            <source src="video/Level2.mp4" type="video/mp4">
                            あなたのブラウザは動画タグをサポートしていません。
                        </video>
                        <a href="https://okamoto-airi.github.io/web-pygame_level2-PC/" target="_blank"
                            class="play-button">
                            ステージ2をプレイ！（PC版）
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="section3" class="dynamic-height-section">
            <img src="images/A-magical-otherworldly-space2.jpg" alt="Section 3 Background"
                class="section-background-image">
            <div class="content-wrapper">
                <div class="main-content-container">
                    <div class="text-content">
                        <h2>ステージ3</h2>
                        <p>矢印キーでキャラクターを移動し、スペースキーで攻撃<br>敵の攻撃に3回当たるとゲームオーバー。敵を倒してゲームクリア！</p>
                    </div>
                    <div class="video-player-container">
                        <video autoplay loop muted playsinline>
                            <source src="video/Level3.mp4" type="video/mp4">
                            あなたのブラウザは動画タグをサポートしていません。
                        </video>
                        <a href="https://okamoto-airi.github.io/web-pygame_level3-PC/" target="_blank"
                            class="play-button">
                            ステージ3をプレイ！（PC版）
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 SIW チーム5 All rights reserved.</p>
    </footer>

    <a href="#" id="back-to-top-btn" class="float-animation">
        <p>上に戻る</p>
        <img src="images/character_monster_slime_green.png" alt="上に戻る">
    </a>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const header = document.getElementById('main-header');
            const sections = document.querySelectorAll('.dynamic-height-section');
            const backToTopBtn = document.getElementById('back-to-top-btn');

            function adjustLayout() {
                const headerHeight = header.offsetHeight;
                document.body.style.paddingTop = `${headerHeight}px`;

                const viewportHeight = window.innerHeight;
                const sectionHeight = viewportHeight - headerHeight;

                sections.forEach(section => {
                    section.style.height = `${sectionHeight}px`;
                });
            }

            adjustLayout();
            window.addEventListener('resize', adjustLayout);

            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.5
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    const contentWrapper = entry.target.querySelector('.content-wrapper');
                    if (entry.isIntersecting) {
                        if (contentWrapper) {
                            contentWrapper.classList.add('active');
                        }
                    } else {
                        if (contentWrapper) {
                            contentWrapper.classList.remove('active');
                        }
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });

            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);

                    if (targetElement) {
                        // ヘッダーの高さを取得
                        const headerHeight = document.getElementById('main-header').offsetHeight;

                        // スクロール先の位置を計算
                        const targetPosition = targetElement.offsetTop - headerHeight;

                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            window.addEventListener('scroll', () => {
                if (window.scrollY > 200) {
                    backToTopBtn.classList.remove('hidden');
                } else {
                    backToTopBtn.classList.add('hidden');
                }
            });

            backToTopBtn.addEventListener('click', (e) => {
                e.preventDefault();
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>

</html>